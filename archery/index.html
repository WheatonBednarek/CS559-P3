<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta property="og:title" content="Archery">
	<meta property="og:image" content="./OpenGraph.png">
	<title>Archery</title>
	<link href="index.css" rel="stylesheet">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
</head>
<body>
	<div id="topbar">
		<div>
			Round <span id="round">1</span>
		</div>
		<div id="scorebar">
			<div id="player1-score">
				0
			</div>
			<div id="player2-score">
				0
			</div>
		</div>
		<div id="windBox">
			<div id="windSpeed">
				<span id="windMag">0.00</span>
				Mph
			</div>
			<div id="windDir">&#8593;</div>
		</div>
		<div id="player_turn">
			Player <span id="player">1</span> Turn
		</div>	
	</div>
	<div class="blackout" id="blackout" style="display: none;">
		<div class="modal" id="sendModal">
			<span>Round <span id="modal-round">0</span></span>
			<div style="display: flex; flex-direction: row; gap: .6rem;">
				<div id="modal-player1-score">0</div>
				<div id="modal-player2-score">0</div>
			</div>
			<input id="modal-link" type="text" disabled value="ttt">
			<input id="sendBtn" type="button" value="Send Game">
		</div>
	</div>
	<div id="endGameModal" class="blackout" style="display: none;">
		<div class="modal">
			<div id="endGameText">Player X Wins!</div>
			<div style="display: flex; flex-direction: row; gap: .6rem;">
				<div id="end-player1-score">0</div>
				<div id="end-player2-score">0</div>
			</div>
			<input id="shareBtn" type="button" value="Share Results">
			<a href=".">
				<input id="restartBtn" type="button" value="Restart Game">
			</a>
		</div>
	</div>
	<button id="toggleBtn" class="floating-btn">Toggle Textures</button>
</body>
<script type="importmap">
	{
		"imports": {
			"three": "../node_modules/three/build/three.module.js"
		}
	}
</script>
<script>
	const BTN = document.getElementById("toggleBtn");

	// initialize the value if not set
	if (localStorage.getItem("load_textures") === null) {
		localStorage.setItem("load_textures", "true");
	}

	// update visual state
	function updateButton() {
		const value = localStorage.getItem("load_textures") === "true";
		BTN.classList.toggle("active", value);
		BTN.textContent = value ? "Basic textures" : "Complex textures";
	}

	// toggle logic
	BTN.addEventListener("click", () => {
		const current = localStorage.getItem("load_textures") === "true";
		const newValue = !current;

		localStorage.setItem("load_textures", String(newValue));
		window.location.reload();
	});

	// set initial state on load
	updateButton();
</script>
<script src="index.js" type="module"></script>
</html>